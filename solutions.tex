% Template last modified by Jake Hart; please contact course staff if you have any questions regarding using this template

\documentclass{cisXXX} % You must have the cisXXX .cls file in your project or working directory (i.e. the same directory as this document) 
\usepackage{comment}

\HWauthor{Sophia Trump}{strump@brynmawr.edu} % Put your name and Penn email on this line
\HWno{2} % Enter the number of the homework you are working on
\HWcourse{CIS 399} % Enter the course department and number here
\HWpartner{Kennedy Ellison} % If your class allows group work, put your partners here
\usepackage{amsmath}

\begin{document}
\maketitle
\HWproblem
Show that $(1-FNR) = \frac{A}{A+C}$.

From the definition of FNR, we know that $(1-FNR)$ can be rewritten as 
\begin{equation}
\label{1} 1-\frac{C}{A+C}
\end{equation}

Simplifying \eqref{1},
\begin{align*}
1-\frac{C}{A+C} &= \frac{1}{1} - \frac{C}{A+C}\\
&=\frac{1(A+C)}{1(A+C)} - \frac{C}{A+C}\\
&=\frac{A+C}{A+C} - \frac{C}{A+C}\\
&=\frac{A+C-C}{A+C}\\
&=\frac{A}{A+C}
\end{align*}

Thus, from the above, $(1-FNR) = \frac{A}{A+C}$. QED.

\HWproblem
Show that $(1-PPV) = \frac{B}{A+B}$.

From the definition of PPV, we know that $(1-PPV)$ can be rewritten as
\begin{equation}
\label{2} 1-\frac{A}{A+B}
\end{equation}

Simplifying \eqref{2},
\begin{align*}
1-\frac{A}{A+B} &= \frac{1}{1} - \frac{A}{A+B}\\
&= \frac{1(A+B)}{1(A+B)} - \frac{A}{A+B}\\
&= \frac{A+B}{A+B} - \frac{A}{A+B}\\
&= \frac{A+B - A}{A+B}\\
&= \frac{B}{A+B}
\end{align*}

Thus, from the above, $(1-PPV) = \frac{B}{A+B}$. QED.

\HWproblem
Show that $\frac{BR}{1-BR} = \frac{A+C}{B+D}$.

From the definition of BR, BR can be rewritten as

\begin{equation}
\label{3} \frac{A+C}{|P|}
\end{equation}

Substituting \eqref{3}, $\frac{BR}{1-BR}$ becomes
\begin{equation}
\label{4} \frac{\frac{A+C}{|P|}}{1-\frac{A+C}{|P|}}
\end{equation}

From the definition of $|P|$, \eqref{4} can be further rewritten as
\begin{equation}
\label{5} \frac{\frac{A+C}{A+B+C+D}}{1-\frac{A+C}{A+B+C+D}}
\end{equation}

Simplifying \eqref{5},
\begin{align*}
\frac{\frac{A+C}{A+B+C+D}}{1-\frac{A+C}{A+B+C+D}} &= \frac{\frac{(A+C)(A+B+C+D)}{A+B+C+D}}{1(A+B+C+D)-\frac{(A+C)(A+B+C+D)}{A+B+C+D}}\\
&= \frac{A+C}{(A+B+C+D) - (A+C)}\\
&= \frac{A+C}{B+D}
\end{align*}

Thus, from the above, $\frac{BR}{1-BR} = \frac{A+C}{B+D}$. QED.

\HWproblem
Using the results from Problems 1, 2, and 3, show that:
$$FPR = (\frac{BR}{1-BR})(\frac{1-PPV}{PPV})(1 -FNR)$$

From Problem 3, we know $\frac{BR}{1-BR}$ can be rewritten as
\begin{equation}
\label{6} \frac{A+C}{B+D}
\end{equation}

From Problem 2, we know $(1-PPV)$ can be rewritten as
\begin{equation}
\label{7} \frac{B}{A+B}
\end{equation}

From the definition of PPV, we know PPV can be rewritten as
\begin{equation}
\label{8} \frac{A}{A+B}
\end{equation}

From Problem 1, we know $(1-FNR)$ can be rewritten as
\begin{equation}
\label{9} \frac{A}{A+C}
\end{equation}

Substituting \eqref{6}, \eqref{7}, \eqref{8}, and \eqref{9} $(\frac{BR}{1-BR})(\frac{1-PPV}{PPV})(1 -FNR)$ becomes
\begin{equation}
\label{10} (\frac{A+C}{B+D})(\frac{\frac{B}{A+B}}{\frac{A}{A+B}})(\frac{A}{A+C})
\end{equation}

Simplifying \eqref{10},
\begin{align*}
(\frac{A+C}{B+D})(\frac{\frac{B}{A+B}}{\frac{A}{A+B}})(\frac{A}{A+C}) &= (\frac{A+C}{B+D})(\frac{\frac{B(A+B)}{A+B}}{\frac{A(A+B)}{A+B}})(\frac{A}{A+C})\\
&= (\frac{A+C}{B+D})(\frac{B}{A})(\frac{A}{A+C})\\
&= \frac{(A+C)BA}{(B+D)A(A+C)}\\
&= \frac{BAA+BAC}{(AB+AD)(A+C)}\\
&= \frac{BAA+BAC}{AAB+AAD+CAB+CAD}\\
&= \frac{BA(A+C)}{A(AB+AD+CB+CD)}\\
&= \frac{B(A+C)}{AB+AD+CB+CD}\\
&= \frac{B(A+C)}{(A+C)(B+D)}\\
&= \frac{B}{B+D}
\end{align*}

From the definition of FPR, we know FPR can be rewritten as
$$\frac{B}{B+D}$$

This is equivalent to the simplified version of $(\frac{BR}{1-BR})(\frac{1-PPV}{PPV})(1 -FNR)$, as shown above. Thus, $FPR = (\frac{BR}{1-BR})(\frac{1-PPV}{PPV})(1 -FNR)$. QED.

\HWproblem
The statement from Problem 4 holds for the entire population as well as for each group individually. Suppose that all three fairness notions are satisfied by our hypothesis, i.e. $FPR_1 = FPR_2$, $FNR_1 = FNR_2$, and $PPV_1 = PPV_2$. Further, assume that all of these values, as well as the base rates, are neither 0 nor 1. Show that this implies that the base rates of the groups must be equal.

From the given, we know $FPR_1  = FPR_2$. From Problem 4, we know FPR can be rewritten as
\begin{equation}
\label{11} FPR = (\frac{BR}{1-BR})(\frac{1-PPV}{PPV})(1 -FNR)
\end{equation}

From the given, we know \eqref{11} holds for the entire population, as well as for each group individually. Thus, it holds for groups 1 and 2,
\begin{equation}
\label{12} (\frac{BR_1}{1-BR_1})(\frac{1-PPV_1}{PPV_1})(1 -FNR_1) = (\frac{BR_2}{1-BR_2})(\frac{1-PPV_2}{PPV_2})(1 -FNR_2)
\end{equation}

From the given, we know $FNR_1$ = $FNR_2$ and $PPV_1$ = $PPV_2$. Let the variable \textit{s} represent $FNR_1$ and $FNR_2$, since they are equal. Similarly, let the variable \textit{z} represent $PPV_1$ and $PPV_2$, since they are equal. Thus, \eqref{12} can be rewritten as
\begin{equation}
\label{13} (\frac{BR_1}{1-BR_1})(\frac{1-z}{z})(1 -s) = (\frac{BR_2}{1-BR_2})(\frac{1-z}{z})(1 -s)
\end{equation}

Simplifying \eqref{13}, (and keeping in mind none of these values are 0),
\begin{align*}
(\frac{BR_1}{1-BR_1})(1 -s) &= (\frac{BR_2}{1-BR_2})(1 -s)\\
\frac{BR_1}{1-BR_1} &= \frac{BR_2}{1-BR_2}\\
BR_1(1-BR_2) &= BR_2(1-BR_1)\\
BR_1 - BR_1BR_2 &= BR_2 - BR_1BR_2\\
BR_1 &= BR_2
\end{align*}

Thus, the base rates of the groups must be equal, since $BR_1 = BR_2$, as shown above. QED.

\HWproblem
Show that if our hypothesis makes no mistakes (i.e. $B_1 = B_2 = 0$ and $C_1 = C_2 = 0$), all three fairness notions will be satisfied, regardless of the base rates for each group.

We must show $FPR_1 = FPR_2$, $FNR_1 = FNR_2$, and $PPV_1 = PPV_2$, regardless of base rates.

\begin{enumerate}
\item Proof that $FPR_1 = FPR_2$:
From the definition of FPR, we know FPR for groups 1 and 2 respectively can be rewritten as
\begin{equation}
\label{14} \frac{B_1}{B_1 + D_1}
\end{equation}
\begin{equation}
\label{15} \frac{B_2}{B_2 + D_2}
\end{equation}

From the given, we know $B_1 = B_2 = 0$. Hence, \eqref{14} and \eqref{15} can be rewritten respectively as
\begin{equation}
\label{16} \frac{0}{0 + D_1}
\end{equation}
\begin{equation}
\label{17} \frac{0}{0 + D_2}
\end{equation}

However, both \eqref{16} and \eqref{17} simplify to $0$. Thus, $FPR_1 = 0$ and $FPR_2 = 0$, and $FPR_1 = FPR_2$. QED.

\item Proof that $FNR_1 = FNR_2$:
From the definition of FNR, we know FNR for groups 1 and 2 respectively can be rewritten as
\begin{equation}
\label{18} \frac{C_1}{A_1 + C_1}
\end{equation}
\begin{equation}
\label{19} \frac{C_2}{A_2 + C_2}
\end{equation}

From the given, we know $C_1 = C_2 = 0$. Hence, \eqref{18} and \eqref{19} can be rewritten respectively as
\begin{equation}
\label{20} \frac{0}{A_1 + 0}
\end{equation}
\begin{equation}
\label{21} \frac{0}{A_2 + 0}
\end{equation}

However, both \eqref{20} and \eqref{21} simplify to $0$. Thus, $FNR_1 = 0$ and $FNR_2 = 0$, and $FNR_1 = FNR_2$. QED.

\item Proof that $PPV_1 = PPV_2$:
From the definition of PPV, we know PPV for groups 1 and 2 respectively can be rewritten as
\begin{equation}
\label{22} \frac{A_1}{A_1 + B_1}
\end{equation}
\begin{equation}
\label{23} \frac{A_2}{A_2 + B_2}
\end{equation}

From the given, we know $B_1 = B_2 = 0$. Hence, \eqref{22} and \eqref{23} can be rewritten respectively as
\begin{equation}
\label{24} \frac{A_1}{A_1 + 0}
\end{equation}
\begin{equation}
\label{25} \frac{A_2}{A_2 + 0}
\end{equation}

However, both \eqref{24} and \eqref{25} simplify to $1$. Thus, $PPV_1 = 1$ and $PPV_2 = 1$, and $PPV_1 = PPV_2$. QED.

From parts 1, 2, and 3, it is shown all three fairness notions are satisfied, regardless of base rates. QED.
\end{enumerate}
\end{document}
